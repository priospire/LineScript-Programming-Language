{
  "name": "LineScript",
  "scopeName": "source.linescript",
  "patterns": [
    {
      "include": "#comment"
    },
    {
      "include": "#string"
    },
    {
      "include": "#number"
    },
    {
      "include": "#functionMain"
    },
    {
      "include": "#keywordInlineFn"
    },
    {
      "include": "#keyword"
    },
    {
      "include": "#type"
    },
    {
      "include": "#builtinSuperuser"
    },
    {
      "include": "#builtinDotRuntime"
    },
    {
      "include": "#builtinPrivileged"
    },
    {
      "include": "#builtinText"
    },
    {
      "include": "#builtinCli"
    },
    {
      "include": "#builtinCollection"
    },
    {
      "include": "#builtinMemory"
    },
    {
      "include": "#builtinHttp"
    },
    {
      "include": "#builtinMath"
    },
    {
      "include": "#builtinAsyncTime"
    },
    {
      "include": "#builtinNumeric"
    },
    {
      "include": "#builtinGraphics"
    },
    {
      "include": "#builtinPhysics"
    },
    {
      "include": "#operator"
    }
  ],
  "repository": {
    "comment": {
      "patterns": [
        {
          "name": "comment.line.double-slash.linescript",
          "match": "//.*$"
        }
      ]
    },
    "string": {
      "name": "string.quoted.double.linescript",
      "begin": "\"",
      "end": "\"",
      "patterns": [
        {
          "name": "constant.character.escape.linescript",
          "match": "\\\\."
        }
      ]
    },
    "number": {
      "patterns": [
        {
          "name": "constant.numeric.float.linescript",
          "match": "\\b\\d+\\.\\d+\\b"
        },
        {
          "name": "constant.numeric.integer.linescript",
          "match": "\\b\\d+\\b"
        }
      ]
    },
    "functionMain": {
      "match": "^\\s*((?:(?:inline|extern|fn|func)\\s+)*)\\b(main)(?=\\s*\\([^\\n)]*\\)\\s*(?:->\\s*[A-Za-z_][A-Za-z0-9_]*\\s*)?(?:throws\\s+[A-Za-z_][A-Za-z0-9_]*(?:\\s*,\\s*[A-Za-z_][A-Za-z0-9_]*)*\\s*)?(?:do\\b|\\{))",
      "captures": {
        "1": {
          "name": "keyword.control.modifier.linescript"
        },
        "2": {
          "name": "entity.name.function.main.linescript"
        }
      }
    },
    "keywordInlineFn": {
      "name": "keyword.control.modifier.linescript",
      "match": "\\b(inline|fn)\\b"
    },
    "keyword": {
      "name": "keyword.control.linescript",
      "match": "\\b(declare|const|owned|return|if|elif|else|unless|while|for|parallel|in|step|do|end|class|extends|constructor|throws|break|continue|true|false|and|or|not|extern|func|flag|public|protected|private|static|virtual|override|final)\\b"
    },
    "type": {
      "name": "storage.type.linescript",
      "match": "\\b(i32|i64|f32|f64|bool|str|void)\\b"
    },
    "builtinSuperuser": {
      "match": "\\b(superuser)(?=\\s*\\()",
      "captures": {
        "1": {
          "name": "support.function.superuser.linescript"
        }
      }
    },
    "builtinDotRuntime": {
      "name": "support.function.linescript.runtime",
      "match": "(?<![A-Za-z0-9_])(\\.format|\\.formatOutput|\\.stateSpeed|\\.freeConsole)(?=\\s*\\()"
    },
    "builtinPrivileged": {
      "name": "support.function.linescript.privileged",
      "match": "\\b(su\\.(?:trace\\.on|trace\\.off|capabilities|memory\\.inspect|compiler\\.inspect|ir\\.dump|debug\\.hook|limit\\.set))(?=\\s*\\()"
    },
    "builtinText": {
      "name": "support.function.linescript.text",
      "match": "\\b(print(?:_(?:i64|f64|bool|str))?|println(?:_(?:i64|f64|bool|str))?|input(?:_(?:i64|f64))?|len|contains|includes|replace|trim|lower|upper|substring|repeat|reverse|byte_at|ord|chr|bytes_len|is_empty|starts_with|ends_with|find|formatOutput|FormatOutput)\\b"
    },
    "builtinCli": {
      "name": "support.function.linescript.cli",
      "match": "\\b(cli_token_count|cli_token|cli_has|cli_value)\\b"
    },
    "builtinCollection": {
      "name": "support.function.linescript.collection",
      "match": "\\b(array_[A-Za-z0-9_]+|dict_[A-Za-z0-9_]+|map_[A-Za-z0-9_]+|object_[A-Za-z0-9_]+|option_[A-Za-z0-9_]+|result_[A-Za-z0-9_]+)\\b"
    },
    "builtinMemory": {
      "name": "support.function.linescript.memory",
      "match": "\\b(mem_[A-Za-z0-9_]+)\\b"
    },
    "builtinHttp": {
      "name": "support.function.linescript.http",
      "match": "\\b(http_[A-Za-z0-9_]+)\\b"
    },
    "builtinMath": {
      "name": "support.function.linescript.math",
      "match": "\\b(pi|tau|deg_to_rad|rad_to_deg|sqrt|sin|cos|tan|asin|acos|atan|atan2|exp|log|log10|floor|ceil|round|pow|gcd|lcm|max|min|abs|clamp|max_i64|min_i64|abs_i64|clamp_i64|max_f64|min_f64|abs_f64|clamp_f64|to_i32|to_i64|to_f32|to_f64|parse_i64|parse_f64|bool_to_i64|i64_to_bool)\\b"
    },
    "builtinAsyncTime": {
      "name": "support.function.linescript.runtime",
      "match": "\\b(clock_ms|clock_us|stateSpeed|spawn|await|await_all|FreeConsole)\\b"
    },
    "builtinNumeric": {
      "name": "support.function.linescript.numeric",
      "match": "\\b(np_[A-Za-z0-9_]+)\\b"
    },
    "builtinGraphics": {
      "name": "support.function.linescript.graphics",
      "match": "\\b(gfx_[A-Za-z0-9_]+|game_[A-Za-z0-9_]+|pg_[A-Za-z0-9_]+)\\b"
    },
    "builtinPhysics": {
      "name": "support.function.linescript.physics",
      "match": "\\b(phys_[A-Za-z0-9_]+|camera_[A-Za-z0-9_]+|key_down|key_down_name)\\b"
    },
    "operator": {
      "name": "keyword.operator.linescript",
      "match": "(\\+\\+|--|\\+=|-=|\\*=|/=|%=|\\^=|\\*\\*=|==|!=|<=|>=|&&|\\|\\||\\+|-|\\*|/|%|\\^|\\*\\*|=|<|>)"
    }
  }
}
